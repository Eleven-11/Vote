<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.gameloft9.demo.dataaccess.dao.system.TpRecordMapper">

    <resultMap id="DemoResultMap" type="com.gameloft9.demo.dataaccess.model.system.TpRecord">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Mon Dec 04 11:17:43 CST 2017.
        -->
        <id column="recordId" property="recordId" jdbcType="INTEGER" />
        <result column="bigTitleId" property="bigTitleId" jdbcType="INTEGER" />
        <result column="releaseDate" property="releaseDate" jdbcType="TIMESTAMP" />
        <result column="id" property="id" jdbcType="INTEGER"/>

    </resultMap>
    <sql id="Demo_Column_List">
        recordId,bigTitleId,releaseDate,id
    </sql>
    <select id="findAll" resultMap="DemoResultMap">
SELECT
r.recordId,
b.bigTitle bigTitleId,
r.releaseDate,
res.resName id
FROM
tp_democratic_bigtitle AS b,
tp_democratic_record AS r,
tp_resourcelist AS res
WHERE
b.bigTitleId=r.bigTitleId
AND
r.id=res.id
    </select>
    <select id="selectAll" resultMap="DemoResultMap">
SELECT
r.recordId,
b.bigTitle bigTitleId,
r.releaseDate,
res.resName id
FROM
tp_democratic_bigtitle AS b,
tp_democratic_record AS r,
tp_resourcelist AS res
WHERE
b.bigTitleId=r.bigTitleId
AND
r.id=res.id
order by id,releaseDate desc
limit #{start,jdbcType=DECIMAL},#{end,jdbcType=DECIMAL}
    </select>
    <select id="countGetAll" resultType="int" parameterType="map">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Mon Dec 04 11:17:05 CST 2017.
        -->
        select
        count(1)
        from tp_democratic_record
    </select>

    <delete id="delete" parameterType="java.lang.Integer">
        delete from tp_democratic_record
        where recordId = #{recordId,jdbcType=INTEGER}
    </delete>
    <delete id="delver" parameterType="java.lang.Integer">
        delete from tp_democratic_verification
        where recordId = #{recordId,jdbcType=INTEGER}
    </delete>
    <delete id="deletesubstandardId" parameterType="java.lang.Integer">
        delete from tp_democratic_subtitleid
        where substandardId = #{substandardId,jdbcType=INTEGER}
    </delete>

    <update id="guanbi" parameterType="com.gameloft9.demo.dataaccess.model.system.TpRecord">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Mon Dec 04 11:17:05 CST 2017.
        -->
        update tp_democratic_record
        set
        id = 36
        where recordId = #{recordId,jdbcType=INTEGER}
    </update>
    <insert id="insertbig" parameterType="com.gameloft9.demo.dataaccess.model.system.TpBigTitle" useGeneratedKeys="true" keyProperty="bigTitleId">
        insert into tp_democratic_bigtitle (bigTitle,`explain`,`number`)
        values (#{bigTitle},#{explain},#{number})
    </insert>
    <insert id="intsersubtitle" parameterType="com.gameloft9.demo.dataaccess.model.system.TpSubtitleContent" useGeneratedKeys="true" keyProperty="subtitleId">
        insert into tp_democratic_subtitlecontent (bigTitleId,subtitleContent)
        values (#{bigTitleId},#{subtitleContent})
    </insert>
    <insert id="intserstandard" parameterType="com.gameloft9.demo.dataaccess.model.system.TpStandard" useGeneratedKeys="true" keyProperty="standardId">
        insert into tp_democratic_standard (subtitleId,standardName,id)
        values (#{subtitleId},#{standardName},#{id})
    </insert>
    <insert id="intsersubstandard" parameterType="com.gameloft9.demo.dataaccess.model.system.TpSubstandard" useGeneratedKeys="true" keyProperty="substandardId">
        insert into tp_democratic_substandard (standardId,substandardName)
        values (#{standardId},#{substandardName})
    </insert>
    <insert id="insertpralation" parameterType="com.gameloft9.demo.dataaccess.model.system.TpRelationship" useGeneratedKeys="true" keyProperty="rid">
        insert into tp_democratic_relationship (subtitleId,uid)
        values (#{subtitleId},#{uid})
    </insert>
    <insert id="insert" parameterType="com.gameloft9.demo.dataaccess.model.system.TpRecord" useGeneratedKeys="true" keyProperty="recordId">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Mon Dec 04 11:17:05 CST 2017.
        -->
        insert into tp_democratic_record (bigTitleId,releaseDate,id)
        values (#{bigTitleId}, #{releaseDate}, #{id})
    </insert>
    <select id="selectByrecId" parameterType="Integer" resultType="java.lang.Integer">
        SELECT bigTitleId FROM  tp_democratic_record WHERE recordId=#{0}
    </select>
    <insert id="insertsubtitletid" parameterType="com.gameloft9.demo.dataaccess.model.system.TpSubtitleId" useGeneratedKeys="true" keyProperty="tid">
        insert into tp_democratic_subtitleid (substandardId,id,uid,subtitleId)
        values (#{substandardId},#{id},#{uid},#{subtitleId})
    </insert>
    <select id="findbysid" parameterType="Integer" resultType="java.lang.Integer">
        SELECT count(1) FROM tp_democratic_subtitleid  WHERE substandardId = #{substandardId,jdbcType=INTEGER}
    </select>
</mapper>
